[gd_scene load_steps=25 format=3 uid="uid://cqe223eosrdy2"]

[ext_resource type="Texture2D" uid="uid://gtr245er7ej4" path="res://img/MathClass.png" id="2_wgaoh"]
[ext_resource type="FontFile" uid="uid://dmijbnep8lnye" path="res://ttf/IHateComicSans.ttf" id="3_nmx2h"]
[ext_resource type="Texture2D" uid="uid://ny2654qfkyxt" path="res://img/door_sprite/0001.png" id="6_2w71s"]
[ext_resource type="Texture2D" uid="uid://dpdgunc7krdh8" path="res://img/door_sprite/0003.png" id="7_wwq45"]
[ext_resource type="Texture2D" uid="uid://ctg3m0v8dt66n" path="res://img/door_sprite/0005.png" id="8_aug38"]
[ext_resource type="Texture2D" uid="uid://bbou5vuwqgy0l" path="res://img/door_sprite/0007.png" id="9_aaclb"]
[ext_resource type="Texture2D" uid="uid://dcjmm7hk8jmrs" path="res://img/door_sprite/0009.png" id="10_0bo13"]
[ext_resource type="Texture2D" uid="uid://bt70or0wi1j4c" path="res://img/door_sprite/0011.png" id="11_cpwdi"]
[ext_resource type="Texture2D" uid="uid://b5de52io4u8r8" path="res://img/door_sprite/0013.png" id="12_g1f2r"]
[ext_resource type="Texture2D" uid="uid://cni16njg865xh" path="res://img/door_sprite/0015.png" id="13_0jxb0"]
[ext_resource type="Texture2D" uid="uid://dxdnqejkghdcw" path="res://img/door_sprite/0017.png" id="14_p1xjg"]
[ext_resource type="Texture2D" uid="uid://c6mc15md40ka3" path="res://img/door_sprite/0019.png" id="15_ebacg"]
[ext_resource type="Texture2D" uid="uid://no4gyu1l1aa0" path="res://img/door_sprite/0021.png" id="16_wvw7r"]
[ext_resource type="Texture2D" uid="uid://cy7xkxxef1auc" path="res://img/door_sprite/0023.png" id="17_ctjmm"]
[ext_resource type="Texture2D" uid="uid://c8p8dfyldooj5" path="res://img/door_sprite/0025.png" id="18_stvvp"]
[ext_resource type="Texture2D" uid="uid://b7ohdiwfwgyfe" path="res://img/door_sprite/0027.png" id="19_scrw8"]
[ext_resource type="Texture2D" uid="uid://cg2ondtvdkj2g" path="res://img/door_sprite/0029.png" id="20_r34k4"]

[sub_resource type="GDScript" id="GDScript_hqve4"]
script/source = "extends Node2D

var group: ButtonGroup

var right_answer = Questions.current().answers[0]
# Called when the node enters the scene tree for the first time.
func _ready():
   
    $Question.set(\"text\", Questions.current().question)
    
    var answers = Questions.current().answers;
    answers.shuffle()
    
    $Answer1.set(\"text\",  answers[0])
    $Answer2.set(\"text\",  answers[1])
    $Answer3.set(\"text\",  answers[2])
    
    $Answer1.pressed.connect(self.answer1_pressed)
    $Answer2.pressed.connect(self.answer2_pressed)
    $Answer3.pressed.connect(self.answer3_pressed)
    
        

func answer1_pressed():
  test_answer($Answer1, $Answer1_colors)    

func answer2_pressed():
  test_answer($Answer2, $Answer2_colors)    

func answer3_pressed():
  test_answer($Answer3, $Answer3_colors)    


func test_answer(button: Button, button_color: ColorRect): 
  var color = button_color.color
  
  if (button.get(\"text\") == right_answer):
    #button.set_theme_stylebox(\"normal\", \"StyleBoxFlat\").bg_color = Color(\"#bada55\")
    button_color.color = Color(0, 0.5, 0, 1)
    $Door.play()
    await $Door.animation_finished
    button_color.color = color
    Global.question = Global.question + 1
    if Global.question < Questions.size():
      Transition.change_scene(\"res://level1.tscn\")
    else:
      Global.question = 0
      Transition.change_scene(\"res://level_finished.tscn\")  
  else: 
    button_color.color = Color(0.7, 0, 0, 1)
    $Timer.start()
    await $Timer.timeout
    button_color.color = color
    #button.get_theme_stylebox(\"normal\",  \"StyleBoxFlat\").bg_color = Color(\"#000000\")
    # button.set(\"custom_styles/normal\").bg_color = Color(\"#000000\")


func _on_button_pressed():
  Global.question = 0
  Transition.change_scene(\"res://main.tscn\")
"

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_cmj85"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_wd4kb"]

[sub_resource type="ViewportTexture" id="ViewportTexture_26cmn"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_5qagh"]

[sub_resource type="SpriteFrames" id="SpriteFrames_i0ksj"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_2w71s")
}, {
"duration": 1.0,
"texture": ExtResource("7_wwq45")
}, {
"duration": 1.0,
"texture": ExtResource("8_aug38")
}, {
"duration": 1.0,
"texture": ExtResource("9_aaclb")
}, {
"duration": 1.0,
"texture": ExtResource("10_0bo13")
}, {
"duration": 1.0,
"texture": ExtResource("11_cpwdi")
}, {
"duration": 1.0,
"texture": ExtResource("12_g1f2r")
}, {
"duration": 1.0,
"texture": ExtResource("13_0jxb0")
}, {
"duration": 1.0,
"texture": ExtResource("14_p1xjg")
}, {
"duration": 1.0,
"texture": ExtResource("15_ebacg")
}, {
"duration": 1.0,
"texture": ExtResource("16_wvw7r")
}, {
"duration": 1.0,
"texture": ExtResource("17_ctjmm")
}, {
"duration": 1.0,
"texture": ExtResource("18_stvvp")
}, {
"duration": 1.0,
"texture": ExtResource("19_scrw8")
}, {
"duration": 1.0,
"texture": ExtResource("20_r34k4")
}],
"loop": false,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_v7pa3"]

[node name="level1" type="Node2D"]
script = SubResource("GDScript_hqve4")

[node name="Background" type="Sprite2D" parent="."]
position = Vector2(640, 360)
scale = Vector2(0.333, 0.333)
texture = ExtResource("2_wgaoh")
metadata/_edit_lock_ = true

[node name="MainMenu" type="Button" parent="."]
offset_left = 956.0
offset_top = 164.0
offset_right = 1041.0
offset_bottom = 194.0
theme_override_font_sizes/font_size = 24
theme_override_styles/normal = SubResource("StyleBoxEmpty_cmj85")

[node name="Answer1_colors" type="ColorRect" parent="."]
offset_left = 382.0
offset_top = 350.0
offset_right = 528.0
offset_bottom = 487.0
color = Color(0.678431, 0, 0, 0)

[node name="Answer2_colors" type="ColorRect" parent="."]
offset_left = 550.0
offset_top = 366.0
offset_right = 696.0
offset_bottom = 504.0
color = Color(0.678431, 0, 0, 0)
metadata/_edit_lock_ = true

[node name="Answer3_colors" type="ColorRect" parent="."]
offset_left = 718.0
offset_top = 350.0
offset_right = 862.0
offset_bottom = 485.0
color = Color(0.678431, 0, 0, 0)

[node name="Answer1" type="Button" parent="."]
offset_left = 380.0
offset_top = 366.0
offset_right = 525.0
offset_bottom = 504.0
theme_override_fonts/font = ExtResource("3_nmx2h")
theme_override_font_sizes/font_size = 32
theme_override_styles/normal = SubResource("StyleBoxEmpty_wd4kb")
icon = SubResource("ViewportTexture_26cmn")
metadata/_edit_lock_ = true

[node name="Answer2" type="Button" parent="."]
offset_left = 550.0
offset_top = 349.0
offset_right = 694.0
offset_bottom = 487.0
theme_override_fonts/font = ExtResource("3_nmx2h")
theme_override_font_sizes/font_size = 32
theme_override_styles/normal = SubResource("StyleBoxEmpty_5qagh")
metadata/_edit_lock_ = true

[node name="Question" type="Label" parent="."]
offset_left = 359.0
offset_top = 93.0
offset_right = 880.0
offset_bottom = 343.0
theme_override_fonts/font = ExtResource("3_nmx2h")
theme_override_font_sizes/font_size = 28
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3
metadata/_edit_lock_ = true

[node name="Door" type="AnimatedSprite2D" parent="."]
position = Vector2(997.4, 423.15)
scale = Vector2(0.265926, 0.262656)
sprite_frames = SubResource("SpriteFrames_i0ksj")
speed_scale = 2.0

[node name="Timer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="Answer3" type="Button" parent="."]
offset_left = 719.0
offset_top = 366.0
offset_right = 864.0
offset_bottom = 504.0
theme_override_fonts/font = ExtResource("3_nmx2h")
theme_override_font_sizes/font_size = 32
theme_override_styles/normal = SubResource("StyleBoxEmpty_v7pa3")
metadata/_edit_lock_ = true

[connection signal="pressed" from="MainMenu" to="." method="_on_button_pressed"]
